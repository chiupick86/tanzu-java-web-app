accelerator:
  displayName: Tanzu Java Web App
  description: A sample Spring Boot web application built with Tanzu supply-chain
  iconUrl: https://raw.githubusercontent.com/sample-accelerators/icons/master/icon-cloud.png
  tags:
  - main-branch
  - java
  - spring
  - web
  - tanzu

engine:
  onConflict: NWayDiff
  merge:
  - include: [ "**/*" ]
    exclude: [ "config/*.yaml", "Tiltfile", "README.md", "grype.yaml", "catalog/*.yaml", ".github/workflows/**" ]
  - include: [ "Tiltfile" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: tanzu-java-web-app
        with: "#artifactId.toLowerCase()"
    - type: ReplaceText
      substitutions:
      - text: your-registry.io/project
        with: "#repositoryPrefix"
  - include: [ "config/*.yaml" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: ": tanzu-java-web-app"
        with: "': ' + #artifactId.toLowerCase()"
  - include: [ "README.md" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: tanzu-java-web-app
        with: "#artifactId"
  - include: [ "catalog/*.yaml" ]
    chain:
    - type: ReplaceText
      substitutions:
      - text: tanzu-java-web-app
        with: "#artifactId"
    - type: RewritePath
      rewriteTo: "#filename"
  - include: [ "config/workload.yaml"]
    chain:
    - type: InvokeFragment
      reference: tap-workload
